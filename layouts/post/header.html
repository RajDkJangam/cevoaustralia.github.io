<header>
    <div class="title">
        {{ if $.Scratch.Get "h1" }}
            <h1><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
            {{ $.Scratch.Set "h1" false }}
        {{ else }}
            <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
        {{ end }}
        {{ with .Description }}
            <p>{{ . }}</p>
        {{ end }}
    </div>
    <div class="meta">
        {{ if .Site.Params.orderByPublishDate }}
            {{ $.Scratch.Set "dateType" .PublishDate }}
        {{ else }}
            {{ $.Scratch.Set "dateType" .Date }}
        {{ end }}

        <time class="published" datetime='{{ ($.Scratch.Get "dateType").Format "2006-01-02" }}'>
            {{ ($.Scratch.Get "dateType").Format "January 2, 2006" }}
        </time>
        <div class="author">
            {{ $author := index .Site.Data.authors .Params.author }}
            {{ if $author }}
                {{ $.Scratch.Set "url" "#" }}
                {{ if $author.gravatar }}
                    {{ $url := printf "https://www.gravatar.com/avatar/%s" $author.gravatar }}
                    {{ $.Scratch.Set "url" $url }}
                {{ else }}
                    {{ $url := replace (lower $author.name) " " "_" }}
                    {{ $url := printf "img/team/%s.jpg" $url }}
                    {{ $.Scratch.Set "url" $url }}
                {{ end }}
                
                {{ $.Scratch.Set "profile" "#" }}
                {{ if $author.github }}
                    {{ $profile := printf "https://github.com/%s" $author.github }}
                    {{ $.Scratch.Set "profile" $profile }}
                {{ end }}
                {{ if $author.linkedin }}
                    {{ $profile := printf "https://linkedin.com/in/%s" $author.linkedin }}
                    {{ $.Scratch.Set "profile" $profile }}
                {{ end }}
                {{ if $author.twitter }}
                    {{ $profile := printf "https://twitter.com/%s" $author.twitter }}
                    {{ $.Scratch.Set "profile" $profile }}
                {{ end }}
                
                <a href="{{ $.Scratch.Get "profile" }}">
                    <img class="avatar img-circle hidden-sm" src="{{ $.Scratch.Get "url" | absURL }}">
                </a>
                <p class="name">{{ $author.display_name }}</p>
            {{ else }}
                <!-- unknown person -->
                <p class="name">{{ .Params.author }}</p>
            {{ end }}
        </div>

        {{ if .Site.Params.includeReadingTime }}
            <p>{{ .ReadingTime }} minute read</p>
        {{ end }}    </div>
</header>
